(()=>{class e{myLibrary=[];get libraryArray(){return this.myLibrary}addBookToLibrary(e){this.myLibrary.push(e)}removeBookFromLibrary(e){this.myLibrary.splice(e,1)}toggleReadStatus(e){this.myLibrary[e].toggleRead()}static createBook(e,t,a,o){let r=o;return{title:e,author:t,pages:a,getRead:()=>r,toggleRead:()=>{r=!r}}}}(()=>{const t=document.querySelector(".books-container"),a=document.querySelector(".modal"),o=document.querySelector(".new-book-btn"),r=document.querySelector("#new-book-form"),n=new e,i=e.createBook("The Hobbit","J.R.R. Tolkien",295,!1),d=e.createBook("To Kill a Mockingbird","Harper Lee",281,!0),s=e.createBook("Pride and Prejudice","Jane Austen",435,!1),l=e.createBook("The Great Gatsby","F. Scott Fitzgerald",180,!0),c=e.createBook("Wuthering Heights","Emily Bronte",357,!0),u=e.createBook("1984","George Orwell",328,!1);n.addBookToLibrary(i),n.addBookToLibrary(d),n.addBookToLibrary(s),n.addBookToLibrary(l),n.addBookToLibrary(c),n.addBookToLibrary(u);const y=()=>{t.innerHTML="";for(let e=0;e<n.libraryArray.length;e+=1){const a=n.libraryArray[e],o=document.createElement("div"),r=document.createElement("h2"),i=document.createElement("span"),d=document.createElement("h3"),s=document.createElement("p"),l=document.createElement("button"),c=document.createElement("button");r.textContent=a.title,i.textContent="by ",d.textContent=a.author,s.textContent=`${a.pages} pages`,l.textContent=a.getRead()?"Read":"Unread",c.textContent="Ã—",o.classList.add("book-card"),o.dataset.index=e;const u=document.createElement("div");o.appendChild(r),o.appendChild(c).classList.add("remove-book"),u.appendChild(i),u.appendChild(d),o.appendChild(u),o.appendChild(s),o.appendChild(l).classList.add("read-btn"),t.appendChild(o)}};function m(){a.classList.add("hidden"),a.querySelector("form").reset()}function g(){const{title:e}=r;e.validity.valueMissing?e.setCustomValidity("Surely there's a title"):e.setCustomValidity("")}function p(){const{author:e}=r;e.validity.valueMissing?e.setCustomValidity("Written by no one? Odd..."):e.setCustomValidity("")}function b(){const{pages:e}=r;e.validity.valueMissing?e.setCustomValidity("Empty! Unheard of"):e.validity.rangeUnderflow?e.setCustomValidity("Sounds too short"):e.setCustomValidity("")}t.addEventListener("click",(function(e){"BUTTON"===e.target.tagName&&(e.target.classList.contains("read-btn")&&(n.toggleReadStatus(e.target.parentNode.dataset.index),y()),e.target.classList.contains("remove-book")&&(n.removeBookFromLibrary(e.target.parentNode.dataset.index),e.target.parentNode.classList.add("transparent"),setTimeout((()=>{y()}),350)))})),a.addEventListener("click",(function(e){e.target.closest(".form-container")?"BUTTON"===e.target.tagName&&"reset"===e.target.getAttribute("type")&&m():m()})),o.addEventListener("click",(function(){a.classList.remove("hidden")})),r.addEventListener("submit",(function(t){t.preventDefault();const a=t.target;if(a.checkValidity()){const t=e.createBook(a.title.value,a.author.value,a.pages.value,a.read.checked);n.addBookToLibrary(t),y(),m()}else g(),p(),b(),a.reportValidity()})),r.title.addEventListener("input",g),r.author.addEventListener("input",p),r.pages.addEventListener("input",b),y()})()})();